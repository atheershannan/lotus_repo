# ğŸ—ï¸ PROMPT: ×××¤×™×™× ×™× ×•××¡×˜×¨×˜×’×™×•×ª ×¤×™×ª×•×— ×©×œ ×”××¢×¨×›×ª

## ğŸ“‹ ×ª×•×›×Ÿ ×¢×™× ×™×™× ×™×
- [××‘× ×” ×›×œ×œ×™](#××‘× ×”-×›×œ×œ×™)
- [FRONTEND - ×××¤×™×™× ×™× ×•-Tech Stack](#frontend)
- [BACKEND - ×××¤×™×™× ×™× ×•-Tech Stack](#backend)
- [DATABASE - ×××¤×™×™× ×™× ×•-Tech Stack](#database)
- [×”××¨×›×™×˜×§×˜×•×¨×” ×”×›×œ×œ×™×ª](#×”××¨×›×™×˜×§×˜×•×¨×”-×”×›×œ×œ×™×ª)
- [×”×•×¨××•×ª ×¤×¨×™×¡×” (Deployment)](#×”×•×¨××•×ª-×¤×¨×™×¡×”-deployment)

---

## ğŸ¯ ××‘× ×” ×›×œ×œ×™

**×©× ×”×¤×¨×•×™×§×˜**: Contextual Corporate Assistant RAG/GRAPH
**×¡×’× ×•×Ÿ ××¨×›×™×˜×§×˜×•×¨×”**: Microservices Architecture
**×¤×œ×˜×¤×•×¨××ª ×¤×¨×™×¡×”**:
  - **FRONTEND** â†’ **Vercel** (Static Site & Serverless Functions)
  - **BACKEND** â†’ **Railway** (Node.js Container Deployment)
  - **DATABASE** â†’ **Supabase** (PostgreSQL + BaaS)
**×’×¨×¡×”**: 1.0

×”××¢×¨×›×ª ××•×¨×›×‘×ª ××©×œ×•×©×” ××•×§×“×™× ×¢×™×§×¨×™×™×:
1. **FRONTEND** - ×××©×§ ×”××©×ª××© ×•×”×œ×•×’×™×§×” ×‘×¦×“ ×”×œ×§×•×— **[Vercel]**
2. **BACKEND** - ×©×¨×ª ×”-API, ×œ×•×’×™×§×” ×¢×¡×§×™×ª ×•×¢×™×‘×•×“ AI **[Railway]**
3. **DATABASE** - ××—×¡×•×Ÿ × ×ª×•× ×™×, ×•×§×˜×•×¨×™× ×•×’×¨×£ ×”×™×“×¢ **[Supabase]**

---

## ğŸ’» FRONTEND

### ×ª×¤×§×™×“ ×•××˜×¨×”
FRONTEND ××—×¨××™ ×¢×œ ×™×¦×™×¨×ª ×××©×§ ×”××©×ª××© ×”××•×“×¨× ×™ ×•×”××™× ×˜×¨××§×˜×™×‘×™, × ×™×”×•×œ ××¦×‘ ××¤×œ×™×§×¦×™×”, ×ª×§×©×•×¨×ª ×¢× ×”-API ×•× ×™×”×•×œ ××™××•×ª ××©×ª××©×™×.

### ×˜×›× ×•×œ×•×’×™×•×ª ×•×¡×¤×¨×™×•×ª ×¢×™×§×¨×™×•×ª

#### Core Framework
- **React 18.2.0** - ×¡×¤×¨×™×™×ª UI ××•×‘×™×œ×”
- **React DOM 18.2.0** - ×¨×™× ×“×•×¨ ×“×•××™
- **React Router 6.20.1** - × ×™×•×•×˜ ×‘×™×Ÿ ×¢××•×“×™×
- **Create React App 5.0.1** - ×›×œ×™ ×‘× ×™×™×” ×•×ª×¦×•×¨×”

#### State Management
- **Redux Toolkit 2.0.1** - × ×™×”×•×œ ××¦×‘ ×’×œ×•×‘×œ×™
- **React Redux 9.0.4** - ××™× ×˜×’×¨×¦×™×” ×‘×™×Ÿ React ×œ-Redux
- **React Query 3.39.3** - × ×™×”×•×œ ×©×¨×ª state

#### UI Components & Styling
- **Material-UI (MUI) 5.15.0** - ×¡×¤×¨×™×™×ª ×§×•××¤×•× × ×˜×™×
- **Material Icons 5.15.0** - ××™×™×§×•× ×™×
- **Emotion React 11.11.1** - CSS-in-JS
- **Styled Components 6.1.6** - ×§×•××¤×•× × ×˜×™× ××¢×•×¦×‘×™×
- **Framer Motion 10.16.16** - ×× ×™××¦×™×•×ª

#### API & Backend Integration
- **Axios 1.6.2** - HTTP client ×œ×ª×§×©×•×¨×ª API
- **Supabase JS 2.38.4** - ××™× ×˜×’×¨×¦×™×” ×¢× Supabase
- **React Hook Form 7.48.2** - ×˜×™×¤×•×œ ×‘×˜×¤×¡×™×

#### Utilities & Helpers
- **date-fns 2.30.0** - ×¢×‘×•×“×” ×¢× ×ª××¨×™×›×™×
- **lodash 4.17.21** - ×›×œ×™ ×¢×–×¨ ×œ××™×“×¢
- **react-markdown 9.0.1** - ×¨×™× ×“×•×¨ Markdown
- **react-syntax-highlighter 15.5.0** - ×”×“×’×©×ª ×§×•×“
- **react-hot-toast 2.4.1** - ×”×•×“×¢×•×ª ×œ××©×ª××©

### ××‘× ×” ×ª×™×§×™×•×ª
```
FRONTEND/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # ×§×•××¤×•× × ×˜×™× ×œ×©×™××•×© ×—×•×–×¨
â”‚   â”‚   â”œâ”€â”€ chat/           # ×§×•××¤×•× × ×˜×™× ×©×œ ×¦'××˜
â”‚   â”‚   â”œâ”€â”€ common/         # ×§×•××¤×•× × ×˜×™× ××©×•×ª×¤×™×
â”‚   â”‚   â””â”€â”€ layout/         # ×§×•××¤×•× × ×˜×™× ×©×œ ××‘× ×”
â”‚   â”œâ”€â”€ pages/              # ×¢××•×“×™× ×¨××©×™×™×
â”‚   â”‚   â”œâ”€â”€ DashboardPage.js
â”‚   â”‚   â”œâ”€â”€ ChatPage.js
â”‚   â”‚   â”œâ”€â”€ ContentPage.js
â”‚   â”‚   â””â”€â”€ ProfilePage.js
â”‚   â”œâ”€â”€ store/              # × ×™×”×•×œ ××¦×‘ Redux
â”‚   â”‚   â”œâ”€â”€ slices/         # ×¤×¨×•×¡×•×ª ××¦×‘
â”‚   â”‚   â””â”€â”€ store.js
â”‚   â”œâ”€â”€ services/           # ×©×™×¨×•×ª×™ API
â”‚   â”‚   â””â”€â”€ api.js
â”‚   â”œâ”€â”€ hooks/              # React Hooks ××•×ª×××™×
â”‚   â”œâ”€â”€ theme/              # ×¢×¨×›×ª × ×•×©×
â”‚   â””â”€â”€ utils/              # ×›×œ×™ ×¢×–×¨
â”œâ”€â”€ public/                 # ×§×‘×¦×™× ×¡×˜×˜×™×™×
â””â”€â”€ package.json
```

### ×ª×›×•× ×•×ª ×¢×™×§×¨×™×•×ª
1. **Multi-platform Support** - ×ª××™×›×” ×‘-Slack, Teams, Web
2. **Real-time Chat** - ×¦'××˜ ×‘×–××Ÿ ×××ª ×¢× WebSocket
3. **Authentication** - × ×™×”×•×œ JWT tokens ×•-refresh tokens
4. **State Management** - × ×™×”×•×œ ××¦×‘ ××•×¨×›×‘ ×¢× Redux
5. **Responsive Design** - ×ª××™×›×” ×‘× ×™×™×“
6. **Error Handling** - ×˜×™×¤×•×œ ××¨×›×–×™ ×‘×©×’×™××•×ª
7. **Loading States** - ××™× ×“×™×§×˜×•×¨×™× ×©×œ ×˜×¢×™× ×”
8. **Form Validation** - ×•×œ×™×“×¦×™×” ×©×œ ×˜×¤×¡×™×

### ×¡×‘×™×‘×•×ª ×¤×™×ª×•×—
- **Development**: `npm start` - ×¤×•×ª×— ×‘-localhost:3000
- **Production Build**: `npm run build` - ×‘× ×™×™×” ×œ×¤×¨×•×“×§×©×Ÿ
- **Testing**: Jest + React Testing Library
- **Linting**: ESLint
- **Formatting**: Prettier

### ×ª×œ×•×™×•×ª ×¡×‘×™×‘×”
```env
REACT_APP_API_URL=http://localhost:3001/api
REACT_APP_SUPABASE_URL=https://your-project.supabase.co
REACT_APP_SUPABASE_ANON_KEY=your-supabase-anon-key
```

### ×¤×¨×™×¡×” ×‘-Vercel
- **×¤×œ×˜×¤×•×¨××”**: Vercel
- **×¡×•×’ ×¤×¨×™×¡×”**: Static Site + Serverless Functions
- **Build Command**: `cd FRONTEND && npm ci && npm run build`
- **Output Directory**: `FRONTEND/build`
- **Auto-Deploy**: ×¤×¨×™×¡×” ××•×˜×•××˜×™×ª ×-GitHub
- **Environment**: ××©×ª× ×™ ×¡×‘×™×‘×” ××•×’×“×¨×™× ×‘-Vercel Dashboard
- **CDN**: ×¤×¨×™×¡×” ×’×œ×•×‘×œ×™×ª ×¢× CDN ×©×œ Vercel
- **Custom Domain**: ×ª××™×›×” ×‘×“×•××™×™×Ÿ ××•×ª××
- **Preview Deployments**: ×”×ª×§× ×•×ª preview ×œ×›×œ commit

**Vercel Configuration** (vercel.json):
```json
{
  "buildCommand": "cd FRONTEND && npm ci && npm run build",
  "outputDirectory": "FRONTEND/build",
  "framework": "create-react-app",
  "env": {
    "REACT_APP_API_URL": "@railway_backend_url",
    "REACT_APP_SUPABASE_URL": "@supabase_url",
    "REACT_APP_SUPABASE_ANON_KEY": "@supabase_anon_key"
  }
}
```

---

## ğŸ”§ BACKEND

### ×ª×¤×§×™×“ ×•××˜×¨×”
BACKEND ××—×¨××™ ×¢×œ ×œ×•×’×™×§×” ×¢×¡×§×™×ª, ×¢×™×‘×•×“ AI (RAG), × ×™×”×•×œ API endpoints, ××™× ×˜×’×¨×¦×™×” ×¢× ××™×§×¨×•-×©×™×¨×•×ª×™× ×•× ×™×”×•×œ ×’×¨×£ ×”×™×“×¢.

### ×˜×›× ×•×œ×•×’×™×•×ª ×•×¡×¤×¨×™×•×ª ×¢×™×§×¨×™×•×ª

#### Core Runtime & Framework
- **Node.js 18+** - ×¡×‘×™×‘×ª ×¨×™×¦×”
- **Express.js 4.18.2** - ××¡×’×¨×ª web framework
- **CORS 2.8.5** - ×˜×™×¤×•×œ ×‘-CORS
- **Helmet 7.1.0** - ××‘×˜×—×” ×‘×¡×™×¡×™×ª

#### Database & ORM
- **Prisma 5.7.1** - ORM ×œ× ×™×”×•×œ ××¡×“ × ×ª×•× ×™×
- **@prisma/client 5.7.1** - ×œ×§×•×— Prisma
- **PostgreSQL** - ××¡×“ × ×ª×•× ×™× ×¨××©×™ ×¢× pgvector

#### Authentication & Security
- **jsonwebtoken 9.0.2** - JWT tokens
- **bcryptjs 2.4.3** - ×”×¦×¤× ×ª ×¡×™×¡×××•×ª
- **express-rate-limit 7.1.5** - ×”×’×‘×œ×ª ×‘×§×©×•×ª
- **Supabase JS 2.38.4** - ××™× ×˜×’×¨×¦×™×” ×¢× Supabase Auth

#### AI & RAG Services
- **OpenAI 4.20.1** - API ×œ-GPT-4 ×•×¢×™×‘×•×“ ×˜×§×¡×˜
- **Custom RAG Service** - ××™××•×© ××•×ª×× ×œ-RAG

#### Caching & Performance
- **Redis 4.6.10** - ×–×™×›×¨×•×Ÿ ××˜××•×Ÿ ×¨×‘-×©×›×‘×ª×™
- **compression 1.7.4** - ×“×—×™×¡×ª ×ª×’×•×‘×•×ª

#### Utilities & Helpers
- **dotenv 16.3.1** - × ×™×”×•×œ ××©×ª× ×™ ×¡×‘×™×‘×”
- **joi 17.11.0** - ×•×œ×™×“×¦×™×” ×©×œ schema
- **winston 3.11.0** - ××¢×¨×›×ª logging
- **axios 1.6.2** - HTTP client
- **multer 1.4.5-lts.1** - ×˜×™×¤×•×œ ×‘×”×¢×œ××•×ª ×§×‘×¦×™×
- **express-validator 7.0.1** - ×•×œ×™×“×¦×™×” ×©×œ × ×ª×•× ×™×

### ××‘× ×” ×ª×™×§×™×•×ª
```
BACKEND/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ routes/             # ×ª×•×•××™ API
â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”œâ”€â”€ chat.js
â”‚   â”‚   â”œâ”€â”€ content.js
â”‚   â”‚   â”œâ”€â”€ users.js
â”‚   â”‚   â””â”€â”€ analytics.js
â”‚   â”œâ”€â”€ services/           # ×œ×•×’×™×§×” ×¢×¡×§×™×ª
â”‚   â”‚   â”œâ”€â”€ ragService.js  # ×©×™×¨×•×ª RAG
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ middleware/         # middleware ×©×œ Express
â”‚   â”‚   â””â”€â”€ auth.js
â”‚   â”œâ”€â”€ database/          # ×›×œ×™ ××¡×“ × ×ª×•× ×™×
â”‚   â”‚   â””â”€â”€ seed.js
â”‚   â”œâ”€â”€ config/            # ×§×‘×¦×™ ×ª×¦×•×¨×”
â”‚   â”‚   â””â”€â”€ mock.js
â”‚   â”œâ”€â”€ tests/             # ×‘×“×™×§×•×ª
â”‚   â””â”€â”€ server.js          # × ×§×•×“×ª ×”×›× ×™×¡×”
â”œâ”€â”€ prisma/                # ×¡×›××ª Prisma
â”‚   â””â”€â”€ schema.prisma
â””â”€â”€ package.json
```

### API Endpoints ×¢×™×§×¨×™×™×

#### Authentication
- `POST /api/auth/login` - ×”×ª×—×‘×¨×•×ª ××©×ª××©
- `POST /api/auth/refresh` - ×¨×¢× ×•×Ÿ token
- `POST /api/auth/logout` - ×”×ª× ×ª×§×•×ª

#### Chat & RAG
- `POST /api/chat/message` - ×©×œ×™×—×ª ×”×•×“×¢×ª ×¦'××˜
- `GET /api/chat/history` - ×”×™×¡×˜×•×¨×™×™×ª ×¦'××˜
- `POST /api/chat/search` - ×—×™×¤×•×© ×‘-RAG

#### Content Management
- `GET /api/content` - ×¨×©×™××ª ×ª×•×›×Ÿ
- `GET /api/content/:id` - ×¤×¨×˜×™ ×ª×•×›×Ÿ
- `POST /api/content` - ×™×¦×™×¨×ª ×ª×•×›×Ÿ ×—×“×©

#### Analytics
- `GET /api/analytics/progress` - ×”×ª×§×“××•×ª ××©×ª××©
- `GET /api/analytics/performance` - ×‘×™×¦×•×¢×™×
- `GET /api/analytics/recommendations` - ×”××œ×¦×•×ª

### ×ª×›×•× ×•×ª ×¢×™×§×¨×™×•×ª
1. **RAG Engine** - ×× ×•×¢ RAG ×¢× OpenAI GPT-4
2. **Knowledge Graph** - × ×™×”×•×œ ×’×¨×£ ×™×“×¢ ×¢× PostgreSQL
3. **Vector Search** - ×—×™×¤×•×© ×“××™×•×Ÿ ×•×§×˜×•×¨×™ ×¢× pgvector
4. **Microservices Integration** - ××™× ×˜×’×¨×¦×™×” ×¢× ××™×§×¨×•-×©×™×¨×•×ª×™×
5. **Authentication** - × ×™×”×•×œ JWT ×•-Supabase Auth
6. **Rate Limiting** - ×”×’×‘×œ×ª ×§×¦×‘ ×‘×§×©×•×ª
7. **Caching** - ×–×™×›×¨×•×Ÿ ××˜××•×Ÿ ×¢× Redis
8. **Logging** - ×™×•×× ×™ ××¢×¨×›×ª ×¢× Winston

### ×¡×‘×™×‘×•×ª ×¤×™×ª×•×—
- **Development**: `npm run dev` - ×¢× nodemon
- **Production**: `npm start` - ×”×¨×¦×” ×¡×˜× ×“×¨×˜×™×ª
- **Testing**: Jest ×¢× supertest
- **Database**: Prisma Studio `npm run db:studio`

### ××©×ª× ×™ ×¡×‘×™×‘×”
```env
DATABASE_URL=postgresql://username:password@localhost:5432/db
SUPABASE_SERVICE_ROLE_KEY=your-key
OPENAI_API_KEY=sk-your-key
PORT=3001
NODE_ENV=development
REDIS_URL=redis://localhost:6379
```

### ×¤×¨×™×¡×” ×‘-Railway
- **×¤×œ×˜×¤×•×¨××”**: Railway
- **×¡×•×’ ×¤×¨×™×¡×”**: Containerized Node.js Application
- **Build**: Docker Container from Dockerfile
- **Auto-Deploy**: ×¤×¨×™×¡×” ××•×˜×•××˜×™×ª ×-GitHub
- **Environment Variables**: ××•×’×“×¨×•×ª ×‘-Railway Dashboard
- **Custom Domain**: ×ª××™×›×” ×‘×“×•××™×™×Ÿ ××•×ª××
- **Health Checks**: × ×™×˜×•×¨ ×‘×¨×™××•×ª ×”×©×¨×ª
- **Logs**: ×¦×¤×™×™×” ×‘×™×•×× ×™ ×©×¨×ª ×‘×–××Ÿ ×××ª

**Railway Configuration** (railway.json):
```json
{
  "buildCommand": "cd BACKEND && npm install",
  "startCommand": "node src/server.js",
  "watchPatterns": [
    "BACKEND/**"
  ]
}
```

**Dockerfile Configuration**:
```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY BACKEND/package*.json ./
RUN npm ci --only=production
COPY BACKEND/ .
EXPOSE 3001
CMD ["node", "src/server.js"]
```

---

## ğŸ—„ï¸ DATABASE

### ×ª×¤×§×™×“ ×•××˜×¨×”
DATABASE ××—×¨××™ ×¢×œ ××—×¡×•×Ÿ × ×ª×•× ×™×, ×•×§×˜×•×¨×™×, ×’×¨×£ ×™×“×¢, ××™×“×¢ ××©×ª××©×™× ×•×ª×•×›×Ÿ ×œ××™×“×”. ×›×•×œ×œ ×ª××™×›×” ×‘-vector search ×œ-RAG.

### ×˜×›× ×•×œ×•×’×™×•×ª ×•×›×œ×™× ×¢×™×§×¨×™×™×

#### Database Engine
- **PostgreSQL 15+** - ××¡×“ × ×ª×•× ×™× ×™×—×¡×™ ×¨××©×™
- **pgvector Extension** - ×ª××™×›×” ×‘×•×•×§×˜×•×¨×™× ×•-similarity search
- **HNSW Indexing** - ××™× ×“×§×¡ ××”×™×¨ ×œ×—×™×¤×•×© ×“××™×•×Ÿ

#### Backend Services
- **Supabase** - Backend-as-a-Service ×›×•×œ×œ:
  - PostgreSQL Database
  - Authentication & Authorization
  - Real-time Subscriptions
  - Storage & File Management
  - Edge Functions (Serverless)

#### ORM & Schema
- **Prisma ORM** - ×™×¦×™×¨×ª ×¡×›××” ×•×©×›×‘×ª ×’×™×©×” ×œ× ×ª×•× ×™×
- **Prisma Migrations** - × ×™×”×•×œ ×’×¨×¡××•×ª ××¡×“ × ×ª×•× ×™×
- **Prisma Studio** - GUI ×œ× ×™×”×•×œ × ×ª×•× ×™×

### ××‘× ×” ×ª×™×§×™×•×ª
```
DATABASE/
â”œâ”€â”€ schema/                 # ×¡×›××•×ª SQL
â”‚   â”œâ”€â”€ 01_core_tables.sql       # ×˜×‘×œ××•×ª ×œ×™×‘×”
â”‚   â”œâ”€â”€ 02_vector_tables.sql     # ×˜×‘×œ××•×ª ×•×§×˜×•×¨×™×
â”‚   â””â”€â”€ 07_rls_policies.sql      # ××“×™× ×™×•×ª ××‘×˜×—×”
â”œâ”€â”€ functions/              # ×¤×•× ×§×¦×™×•×ª ××¡×“ × ×ª×•× ×™×
â”‚   â””â”€â”€ vector_search.sql  # ×—×™×¤×•×© ×•×§×˜×•×¨×™
â”œâ”€â”€ seed/                  # × ×ª×•× ×™ ×“×•×’××”
â”‚   â””â”€â”€ sample_data.sql
â”œâ”€â”€ docs/                  # ×ª×™×¢×•×“
â”‚   â””â”€â”€ hnsw_optimization.md
â””â”€â”€ config/                # ×ª×¦×•×¨×”
    â””â”€â”€ supabase_config.md
```

### ××•×“×œ×™× ×¢×™×§×¨×™×™× (Prisma Schema)

#### Core Models
1. **User** - ××©×ª××©×™× ×•×¤×¨×•×¤×™×œ×™×
   - id, email, name, department, role
   - learningProfile, preferences
   - timestamps

2. **Skill** - ××™×•×× ×•×™×•×ª
   - id, name, description, category
   - level, prerequisites, learningObjectives

3. **LearningContent** - ×ª×•×›×Ÿ ×œ××™×“×”
   - id, title, description, contentType
   - difficultyLevel, skillsCovered
   - contentData, metadata

#### Progress & Analytics
4. **UserProgress** - ×”×ª×§×“××•×ª ××©×ª××©
   - userId, contentId, skillId
   - progressType, completionPercentage
   - status, timestamps

5. **ChatMessage** - ×”×•×“×¢×•×ª ×¦'××˜
   - userId, sessionId, messageType
   - content, metadata, confidenceScore

6. **Recommendation** - ×”××œ×¦×•×ª
   - userId, recommendationType
   - targetId, targetType, reason
   - confidenceScore

7. **LearningAnalytics** - ×× ×œ×™×˜×™×§×”
   - userId, metricName, metricValue
   - metricData, period dates

#### Vectoral Models
8. **DocumentEmbedding** - ×•×§×˜×•×¨×™× ×©×œ ××¡××›×™×
   - contentId, contentType, contentText
   - embedding (vector(1536))

9. **QueryEmbedding** - ×•×§×˜×•×¨×™× ×©×œ ×©××™×œ×ª×•×ª
   - userId, sessionId, queryText
   - embedding (vector(1536))

10. **SkillEmbedding** - ×•×§×˜×•×¨×™× ×©×œ ××™×•×× ×•×™×•×ª
    - skillId, skillText
    - embedding (vector(1536))

#### Knowledge Graph
11. **KnowledgeNode** - ×¦××ª×™× ×‘×’×¨×£
    - nodeType, nodeId, nodeText
    - embedding (vector(1536))
    - properties (JSON)

12. **KnowledgeEdge** - ×§×©×ª×•×ª ×‘×’×¨×£
    - sourceNodeId, targetNodeId
    - relationshipType, weight
    - metadata

13. **VectorSearchCache** - ××˜××•×Ÿ ×—×™×¤×•×©
    - queryHash, queryEmbedding
    - searchResults, searchTimeMs

### ×ª×›×•× ×•×ª ×¢×™×§×¨×™×•×ª
1. **Vector Search** - ×—×™×¤×•×© ×“××™×•×Ÿ ×•×§×˜×•×¨×™ ×¢× pgvector
2. **Knowledge Graph** - ×’×¨×£ ×™×—×¡×™× ×“×™× ××™
3. **Real-time** - ×¢×“×›×•× ×™× ×‘×–××Ÿ ×××ª ×¢× Supabase
4. **Row Level Security (RLS)** - ××‘×˜×—×” ×‘×¨××ª ×©×•×¨×•×ª
5. **Full-text Search** - ×—×™×¤×•×© ×˜×§×¡×˜×•××œ×™ ××œ×
6. **HNSW Indexing** - ××™× ×“×§×¡ ××”×™×¨ ×œ×—×™×¤×•×© ×•×§×˜×•×¨×™
7. **Audit Trail** - ××¢×§×‘ ××—×¨ ×©×™× ×•×™×™×
8. **Automatic Backups** - ×’×™×‘×•×™×™× ××•×˜×•××˜×™×™×

### ××¡×˜×¨×˜×’×™×™×ª ××™× ×“×•×§×¡×™×
- **Primary Indexes** - ×¢×œ ×›×œ ××¤×ª×—×•×ª ×¨××©×™×™×
- **Foreign Key Indexes** - ×¢×œ ××¤×ª×—×•×ª ×–×¨×™×
- **Vector Indexes** - HNSW ×¢×œ ×¢××•×“×•×ª embedding
- **Composite Indexes** - ×¢×œ ×¢××•×“×•×ª ××©×•×œ×‘×•×ª
- **Full-text Indexes** - ×¢×œ ×˜×§×¡×˜ ×—×™×¤×•×©

### ××‘×˜×—×” (RLS Policies)
- **User Data** - ××©×ª××©×™× ×¨×•××™× ×¨×§ ××ª ×”× ×ª×•× ×™× ×©×œ×”×
- **Content Access** - ×”×¨×©××•×ª ×¢×œ ×¤×™ ×ª×¤×§×™×“
- **Admin Access** - ×’×™×©×” ××œ××” ×œ×× ×”×œ×™×
- **Audit Logging** - ×¨×™×©×•× ×›×œ ×¤×¢×•×œ×•×ª ×”××‘×˜×—×”

---

## ğŸŒ ×”××¨×›×™×˜×§×˜×•×¨×” ×”×›×œ×œ×™×ª

### ×–×¨×™××ª × ×ª×•× ×™×

#### 1. User Query Flow
```
User (Web/App) 
  â†’ FRONTEND (React)
  â†’ HTTP Request (Axios)
  â†’ BACKEND API (Express)
  â†’ RAG Service
  â†’ Vector Search (pgvector)
  â†’ OpenAI GPT-4
  â†’ Response Generation
  â†’ BACKEND Response
  â†’ FRONTEND Update
  â†’ User Display
```

#### 2. Knowledge Graph Update Flow
```
External Service
  â†’ Backend Integration
  â†’ Data Processing
  â†’ DATABASE (PostgreSQL)
  â†’ Vector Generation
  â†’ Document Embedding
  â†’ Knowledge Node Update
  â†’ Cache Invalidation
  â†’ Real-time Notification
```

#### 3. Authentication Flow
```
User Login
  â†’ Supabase Auth
  â†’ JWT Token Generation
  â†’ Token Storage (Frontend)
  â†’ API Requests with Token
  â†’ Token Validation (Backend)
  â†’ Authorized Access
```

### ×ª×§×©×•×¨×ª ×‘×™×Ÿ ×¨×›×™×‘×™×

#### FRONTEND â†” BACKEND
- **Protocol**: HTTP/HTTPS
- **Format**: JSON
- **Method**: REST API
- **Authentication**: JWT Bearer Token
- **Client**: Axios

#### BACKEND â†” DATABASE
- **Protocol**: PostgreSQL Connection
- **ORM**: Prisma
- **Pooling**: Connection Pooling
- **Cache**: Redis Layer

#### BACKEND â†” AI Services
- **Service**: OpenAI API
- **Functions**: GPT-4, Embeddings
- **Method**: REST API
- **Authentication**: API Key

### ××‘×˜×—×”
- **HTTPS**: ×”×¦×¤× ×” end-to-end
- **JWT Tokens**: ××™××•×ª ××©×ª××©×™×
- **RLS**: Row Level Security
- **Input Validation**: ×•×œ×™×“×¦×™×” ××œ××”
- **Rate Limiting**: ×”×’×‘×œ×ª ×‘×§×©×•×ª
- **CORS**: ×‘×§×¨×ª ×’×™×©×” ×¦×“×“×™×ª
- **Helmet**: ××‘×˜×—×ª HTTP headers

### ×‘×™×¦×•×¢×™×
- **Caching**: Redis multi-level caching
- **CDN**: Supabase CDN
- **Connection Pooling**: PostgreSQL pooling
- **Compression**: Gzip/Brotli
- **Lazy Loading**: Frontend lazy loading
- **Indexing**: Database indexes
- **Vector Search**: HNSW optimization

### ×¡×§×œ×‘×™×œ×™×•×ª
- **Horizontal Scaling**: Auto-scaling Edge Functions
- **Load Balancing**: Supabase load balancer
- **Database Replicas**: Read replicas
- **Caching**: Distributed cache
- **Serverless**: Pay-per-use model

---

## ğŸ“Š ×¡×™×›×•× Tech Stack

### FRONTEND Stack
| ×§×˜×’×•×¨×™×” | ×˜×›× ×•×œ×•×’×™×” |
|---------|----------|
| **Deployment** | **Vercel** |
| Framework | React 18 |
| State Management | Redux Toolkit |
| UI Library | Material-UI 5 |
| Routing | React Router 6 |
| HTTP Client | Axios |
| Forms | React Hook Form |
| Animations | Framer Motion |
| Styling | Emotion + Styled Components |
| Build Tool | Create React App |
| Testing | Jest + React Testing Library |

### BACKEND Stack
| ×§×˜×’×•×¨×™×” | ×˜×›× ×•×œ×•×’×™×” |
|---------|----------|
| **Deployment** | **Railway** |
| Runtime | Node.js 18+ |
| Framework | Express.js 4 |
| Database ORM | Prisma 5 |
| Authentication | JWT + Supabase Auth |
| AI/ML | OpenAI GPT-4 |
| Caching | Redis 4 |
| Logging | Winston |
| Validation | Joi + Express Validator |
| Security | Helmet + Rate Limiting |
| Testing | Jest + Supertest |

### DATABASE Stack
| ×§×˜×’×•×¨×™×” | ×˜×›× ×•×œ×•×’×™×” |
|---------|----------|
| **Deployment** | **Supabase** |
| Database | PostgreSQL 15+ |
| Vector Extension | pgvector |
| Indexing | HNSW |
| Backend Service | Supabase BaaS |
| ORM | Prisma |
| Security | Row Level Security (RLS) |
| Real-time | Supabase Realtime |
| Storage | Supabase Storage |
| Migrations | Prisma Migrate |

---

## ğŸš€ × ×§×•×“×•×ª ×›× ×™×¡×” ×•×”×¤×¢×œ×”

### FRONTEND
```bash
cd FRONTEND
npm install
npm start              # Development on :3000
npm run build          # Production build
npm test               # Run tests
```

### BACKEND
```bash
cd BACKEND
npm install
npm run dev            # Development with nodemon
npm start              # Production
npm run db:migrate     # Run migrations
npm run db:studio      # Open Prisma Studio
```

### DATABASE
```bash
# Through Supabase Dashboard
# Or via Prisma:
cd BACKEND
npm run db:migrate     # Apply schema
npm run db:seed        # Seed data
npm run db:generate    # Generate Prisma client
```

---

## ğŸŒ ×”×•×¨××•×ª ×¤×¨×™×¡×” (Deployment)

### ×¤×¨×™×¡×ª FRONTEND ×œ-Vercel

#### ×“×¨×š 1: ×¤×¨×™×¡×” ×“×¨×š Vercel Dashboard
1. ×”×™×›× ×¡ ×œ-[Vercel](https://vercel.com)
2. **New Project** â†’ ×‘×—×¨ ××ª ×”-repository
3. ×”×’×“×¨ Root Directory: `FRONTEND`
4. ×”×’×“×¨ Build Command: `npm ci && npm run build`
5. ×”×’×“×¨ Output Directory: `build`
6. ×”×•×¡×£ Environment Variables:
   - `REACT_APP_API_URL` â†’ Railway Backend URL
   - `REACT_APP_SUPABASE_URL` â†’ Supabase Project URL
   - `REACT_APP_SUPABASE_ANON_KEY` â†’ Supabase Anon Key
7. ×œ×—×¥ **Deploy**

#### ×“×¨×š 2: ×¤×¨×™×¡×” ×“×¨×š Vercel CLI
```bash
# ×”×ª×§×Ÿ Vercel CLI
npm i -g vercel

# ×”×™×›× ×¡ ×œ×¡×¤×¨×™×™×ª FRONTEND
cd FRONTEND

# ×”×ª×—×‘×¨ ×œ-Vercel
vercel login

# ×¤×¨×™×¡×ª Development
vercel

# ×¤×¨×™×¡×ª Production
vercel --prod
```

### ×¤×¨×™×¡×ª BACKEND ×œ-Railway

#### ×“×¨×š 1: ×¤×¨×™×¡×” ×“×¨×š Railway Dashboard
1. ×”×™×›× ×¡ ×œ-[Railway](https://railway.app)
2. **New Project** â†’ **Deploy from GitHub repo**
3. ×‘×—×¨ ××ª ×”-repository
4. ×”×’×“×¨:
   - **Root Directory**: `BACKEND`
   - **Watch Paths**: `BACKEND/**`
5. ×”×•×¡×£ Environment Variables:
   - `DATABASE_URL` â†’ Supabase Database URL
   - `SUPABASE_SERVICE_ROLE_KEY` â†’ Supabase Service Key
   - `OPENAI_API_KEY` â†’ OpenAI API Key
   - `PORT` â†’ `3001` (××•×¤×¦×™×•× ×œ×™, Railway ×™×§×‘×¢ ××•×˜×•××˜×™×ª)
6. **Deploy** - Railway ×™×‘× ×” ×•×™×¤×¨×¡ ××•×˜×•××˜×™×ª

#### ×“×¨×š 2: ×¤×¨×™×¡×” ×“×¨×š Railway CLI
```bash
# ×”×ª×§×Ÿ Railway CLI
npm i -g @railway/cli

# ×”×™×›× ×¡ ×œ×¡×¤×¨×™×™×ª BACKEND
cd BACKEND

# ×”×ª×—×‘×¨ ×œ-Railway
railway login

# ×¦×•×¨ Project ×—×“×©
railway init

# ×”×•×¡×£ Environment Variables
railway variables set DATABASE_URL=your-db-url
railway variables set SUPABASE_SERVICE_ROLE_KEY=your-key
railway variables set OPENAI_API_KEY=your-openai-key

# ×¤×¨×™×¡×”
railway up
```

### ×¤×¨×™×¡×ª DATABASE ×œ-Supabase

#### ×“×¨×š Supabase Dashboard
1. ×”×™×›× ×¡ ×œ-[Supabase](https://supabase.com)
2. **New Project** â†’ ×™×¦×™×¨×ª ×¤×¨×•×™×§×˜ ×—×“×©
3. ×‘×—×¨:
   - **Region** - ××–×•×¨ ×’×™××•×’×¨×¤×™
   - **Database Password** - ×¡×™×¡××ª ××¡×“ × ×ª×•× ×™×
4. ×œ××—×¨ ×™×¦×™×¨×ª ×”×¤×¨×•×™×§×˜:
   - **SQL Editor** â†’ ×”×¨×¥ ××ª ×”×¡×›××•×ª ×-`DATABASE/schema/`
   - **Settings â†’ API** â†’ ×”×¢×ª×§ API Keys
5. ×”×•×¡×£ ××ª ×”-API Keys ×œ-FRONTEND ×•×œ-BACKEND

#### ×”×¨×¦×ª Migrations
```bash
cd BACKEND
npm run db:migrate
npm run db:seed
```

---

## ğŸ”— ×§×™×©×•×¨×™× ×—×©×•×‘×™×

- **Vercel Dashboard**: https://vercel.com/dashboard
- **Railway Dashboard**: https://railway.app/dashboard
- **Supabase Dashboard**: https://app.supabase.com
- **Repository**: [GitHub Repository URL]

---

**Document Status**: Complete
**Last Updated**: December 2024
**Version**: 1.0
**Language**: Hebrew

